<h2>Lista de Géneros Musicales</h2>

<div *ngIf="error" class="error">{{ error }}</div>

<ul>
  <li *ngFor="let genre of genres">
    {{ genre.name }} - {{ genre.description }}
  </li>
</ul>

<!-- Formulario para crear género -->
<h2>Crear Género Musical</h2>
<form (ngSubmit)="onCreateGenre()" #genreForm="ngForm">
  <label for="name">Nombre del género:</label>
  <input type="text" id="name" name="name" [(ngModel)]="newGenre.name" #name="ngModel" required minlength="3">
  <div *ngIf="name.invalid && name.touched" style="color:red;">
  <span *ngIf="name.errors?.['required']">El nombre es obligatorio.</span>
  <span *ngIf="name.errors?.['minlength']">El nombre debe tener al menos 3 caracteres.</span>
</div>
  <label for="description">Descripción (opcional):</label>
  <input type="text" id="description" name="description" [(ngModel)]="newGenre.description" #desc="ngModel" maxlength="200">
  <div *ngIf="desc.errors?.['maxlength'] && desc.touched" style="color:red;">
    La descripción no puede exceder los 200 caracteres.
  </div>
  <button type="submit">Crear género</button>
</form>

<!-- Feedback -->
<div *ngIf="createSuccess" style="color: green;">
  Género creado exitosamente.
</div>
<div *ngIf="createError" style="color: red;">
  {{ createError }}
</div>

<!-- Dropdown para seleccionar el género a editar -->
<h2>Editar Género Musical</h2>
<label for="genreSelect">Selecciona un género para editar:</label>
<select id="genreSelect" [(ngModel)]="selectedGenreId" (change)="onSelectGenre()" name="genreSelect">
  <option [ngValue]="null">-- Selecciona un género --</option>
  <option *ngFor="let genre of genres" [ngValue]="genre.id">
    {{ genre.name }}
  </option>
</select>

<!-- Formulario de edición solo si hay uno seleccionado -->
<form *ngIf="editingGenre" (ngSubmit)="onUpdateGenre()" #editForm="ngForm">
  <label for="editName">Nombre del género:</label>
  <input type="text" id="editName" name="editName" [(ngModel)]="editingGenre.name" #editName="ngModel" required minlength="3">
  <div *ngIf="editName.invalid && editName.touched" style="color:red;">
    <span *ngIf="editName.errors?.['required']">El nombre es obligatorio.</span>
    <span *ngIf="editName.errors?.['minlength']">El nombre debe tener al menos 3 caracteres.</span>
  </div>
  <label for="editDescription">Descripción (opcional):</label>
  <input type="text" id="editDescription" name="editDescription" [(ngModel)]="editingGenre.description" #editDesc="ngModel" maxlength="200">
  <div *ngIf="editDesc.errors?.['maxlength'] && editDesc.touched" style="color:red;">
    La descripción no puede exceder 200 caracteres.
  </div>
  <button type="submit">Actualizar género</button>
</form>

<!-- Feedback edición -->
<div *ngIf="editSuccess" style="color: green;">
  Género actualizado exitosamente.
</div>
<div *ngIf="editError" style="color: red;">
  {{ editError }}
</div>



