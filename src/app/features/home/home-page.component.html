<div class="library-container">

<!-- üîî Nuevo Lanzamiento (Carrusel) -->
<div class="carousel-banner" *ngIf="latestSongsToday.length > 0">
  <div class="carousel-slider">
    <div
      class="banner-content"
      *ngFor="let song of latestSongsToday; let i = index"
      [class.slide-in-left]="i === currentSongIndex && slideDirection === 'left'"
      [class.slide-in-right]="i === currentSongIndex && slideDirection === 'right'"
      [class.hidden]="i !== currentSongIndex"
    >
      <img class="banner-image" [src]="getSafeImageUrl(song.imageUrl)" alt="Portada de {{ song.title }}" />
      <div class="banner-text">
        <div class="new-label">üéâ NUEVO LANZAMIENTO</div>
        <div class="new-release-title">{{ song.title }}</div>
        <div class="artist-name">por {{ song.artistName }}</div>
        <div class="subtitle">¬°Escucha lo nuevo de {{ song.artistName }}!</div>
        
        <button class="play-btn" style="margin-left: 0.5rem" (click)="goToSong(song.id)">
          Ver canci√≥n
        </button>
      </div>
    </div>
  </div>

  <!-- üîÅ Controles -->
  <div class="carousel-controls" *ngIf="latestSongsToday.length > 1">
    <button class="carousel-btn prev" (click)="prevBanner()">‚Äπ</button>
    <button class="carousel-btn next" (click)="nextBanner()">‚Ä∫</button>
  </div>

  <!-- üé¨ YouTube player oculto -->
  <div style="display: none">
    <div id="yt-player-detail"></div>
  </div>
</div>

<h1 class="shortcut-title">Accesos directos</h1>

<div class="library-tabs">
    <span 
        [class.tab-active]="activeTab === 'playlists'"
        (click)="setActiveTab('playlists')"
        class="tab-link"
    >
        Playlists
    </span>
    <span 
        [class.tab-active]="activeTab === 'albums'"
        (click)="setActiveTab('albums')"
        class="tab-link"
    >
        √Ålbumes
    </span>
</div>

<!-- Secci√≥n de Playlists -->
<div class="playlists-grid" *ngIf="activeTab === 'playlists'">
    <div 
        class="playlist-card"
        *ngFor="let playlist of playlists"    
        tabindex="0"
        (click)="goToPlaylist(playlist.playlistId)"
        [attr.aria-label]="'Abrir playlist ' + playlist.name"
    >
        <div class="playlist-cover"
        [ngStyle]="{ 'background-image': playlist.urlImage ? 'url(' + playlist.urlImage + ')' : '' }" 
        ></div>
        <div class="playlist-info">
            <span class="playlist-name">{{ playlist.name }}</span>
            <span class="playlist-owner">{{playlist.owner}}</span>
            <button class="playlist-play-btn" 
                aria-label="Reproducir playlist"
                (click)="goToPlaylist(playlist.playlistId); $event.stopPropagation()">
            </button>
        </div>
    </div>
</div>

<!-- Secci√≥n de √Ålbumes -->
<div class="albums-grid" *ngIf="activeTab === 'albums'">
    <div 
        class="album-card"
        *ngFor="let album of albums"
        tabindex="0"
        (click)="goToAlbum(album.id)"
        [attr.aria-label]="'Abrir √°lbum ' + album.title"
    >
        <div 
            class="album-cover"
            [ngStyle]="{ 'background-image': album.cover ? 'url(' + album.cover + ')' : '' }"
        >
            <button class="album-play-btn" (click)="goToAlbum(album.id); $event.stopPropagation()" aria-label="Reproducir √°lbum">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8 5V19L19 12L8 5Z" fill="currentColor"/>
                </svg>
            </button>
        </div>
        <div class="album-info">
            <h3 class="album-title">{{ album.title }}</h3>
            <p class="album-artist">{{ album.artistName }}</p>
        </div>
    </div>
</div>